function loadImages(above){for(var imgDefer=document.getElementsByTagName("img"),i=0;i<imgDefer.length;i++)if(imgDefer[i].getAttribute("data-src")){var elPos=imgDefer[i].getBoundingClientRect();elPos.top<above&&imgDefer[i].setAttribute("src",imgDefer[i].getAttribute("data-src"))}}function init(){loadImages(1400)}function signupComplete(resp){console.log("####",resp),"success"===resp.result&&($("#mce-EMAIL").hide(),$("#mc-embedded-subscribe").hide())}function ampSizer(){if($){var width=$(".article").width();$(".js-amp-iframe").css("width",width).css("height",$(window).height()),$(".js-amp-btn").css("width",width)}}$(document).ready(init()),$(function(){$(document).on("mousedown touchstart","a",function(event){var href=$(event.target).attr("href");href&&ga("send","event","anchorclick",href,null)}),$(".yt-link").on("click",function(e){var hasTouch="ontouchstart"in window;if(!hasTouch){e.preventDefault();var videoId=$(e.target).data("videoid"),width=560,height=480,iframe='<iframe width="'+width+'" height="'+height+'" src="https://www.youtube.com/embed/'+videoId+'?autoplay=1" frameborder="0" allowfullscreen></iframe>';$(".yt-player-wrapper").addClass("is-open"),$("#yt-player").html(iframe)}}),$(".js-yt-close").on("mouseup",function(){$("#yt-player").html(""),$(".yt-player-wrapper").removeClass("is-open")});var touchEventName="ontouchstart"in window?"touchstart":"click";$(".js-toggle-menu").on(touchEventName,function(e){e.preventDefault(),$(this).toggleClass("is-active"),$(".nav--menu").toggleClass("is-open")}),$(".js-modal-close").click(function(){$(".modal").removeClass("is-open")}),$(".js-more-summary").click(function(){$(this).siblings(".entry--txt-summary-collapse").toggleClass("is-open"),$(this).toggleClass("is-active")}),$("#bookmarkme").click(function(){if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(document.title,window.location.href,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(location.href,document.title);else{if(window.opera&&window.print)return this.title=document.title,!0;$(".js-bookmark-alert").toggleClass("is-open")}});var scrolled=!1;$(window).scroll(function(){scrolled||loadImages(99999),scrolled=!0}),setTimeout(function(){scrolled&&ga("send","event","user_reading",document.location.pathname,null)},2e4)}),function($){"use strict";$.ajaxChimp={responses:{"We have sent you a confirmation email":0,"Please enter a value":1,"An email address must contain a single @":2,"The domain portion of the email address is invalid (the portion after the @: )":3,"The username portion of the email address is invalid (the portion before the @: )":4,"This email address looks fake or invalid. Please enter a real email address":5},translations:{en:null},init:function(selector,options){$(selector).ajaxChimp(options)}},$.fn.ajaxChimp=function(options){return $(this).each(function(i,elem){var form=$(elem),email=form.find("input[type=email]"),label=form.find("label[for="+email.attr("id")+"]"),settings=$.extend({url:form.attr("action"),language:"en"},options),url=settings.url.replace("/post?","/post-json?").concat("&c=?");form.attr("novalidate","true"),email.attr("name","EMAIL"),form.submit(function(){function successCallback(resp){if("success"===resp.result)msg="We have sent you a confirmation email",label.removeClass("error").addClass("valid"),email.removeClass("error").addClass("valid");else{email.removeClass("valid").addClass("error"),label.removeClass("valid").addClass("error");var index=-1;try{var parts=resp.msg.split(" - ",2);if(void 0===parts[1])msg=resp.msg;else{var i=parseInt(parts[0],10);i.toString()===parts[0]?(index=parts[0],msg=parts[1]):(index=-1,msg=resp.msg)}}catch(e){index=-1,msg=resp.msg}}"en"!==settings.language&&void 0!==$.ajaxChimp.responses[msg]&&$.ajaxChimp.translations&&$.ajaxChimp.translations[settings.language]&&$.ajaxChimp.translations[settings.language][$.ajaxChimp.responses[msg]]&&(msg=$.ajaxChimp.translations[settings.language][$.ajaxChimp.responses[msg]]),label.html(msg),label.show(2e3),settings.callback&&settings.callback(resp)}var msg,data={},dataArray=form.serializeArray();$.each(dataArray,function(index,item){data[item.name]=item.value}),$.ajax({url:url,data:data,success:successCallback,dataType:"jsonp",error:function(resp,text){console.log("mailchimp ajax submit error: "+text)}});var submitMsg="Submitting...";return"en"!==settings.language&&$.ajaxChimp.translations&&$.ajaxChimp.translations[settings.language]&&$.ajaxChimp.translations[settings.language].submit&&(submitMsg=$.ajaxChimp.translations[settings.language].submit),label.html(submitMsg).show(2e3),!1})}),this}}(jQuery),$("#mc-embedded-subscribe-form").ajaxChimp({url:"//getnewsblock.us10.list-manage.com/subscribe/post?u=8ad72db3d9bf3cc51a37d4fbe&id=68134db832",callback:signupComplete});var addthisScript=document.createElement("script");addthisScript.setAttribute("src","http://s7.addthis.com/js/300/addthis_widget.js#domready=1"),document.body.appendChild(addthisScript);var addthis_config=addthis_config||{};addthis_config.pubid="ra-54d413a56139be0c";var _qevents=_qevents||[];!function(){var elem=document.createElement("script");elem.src=("https:"==document.location.protocol?"https://secure":"http://edge")+".quantserve.com/quant.js",elem.async=!0,elem.type="text/javascript";var scpt=document.getElementsByTagName("script")[0];scpt.parentNode.insertBefore(elem,scpt)}(),_qevents.push({qacct:"p-aaMptX6PjSV-c"}),$(function(){ampSizer(),$(window).resize(ampSizer),greta.gossip.on("click_event",function(data){var $ul=$("#rt-events");$ul.append('<li><a href="'+data.url+'">'+data.text+"</a></li>")}),$(document).on("mousedown touchstart","a",function(event){var href=$(event.target).attr("href"),altText=$(event.target).attr("title");href&&greta.gossip.broadcast([{event:"click_event",data:{url:href,text:altText,updatedAt:new Date}}])})});